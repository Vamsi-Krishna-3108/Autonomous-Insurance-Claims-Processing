<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Autonomous Insurance Claims Processing</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<div class="container mt-5 mb-5">

    <!-- Upload Card -->
    <div class="card shadow-lg mb-4">
        <div class="card-body text-center">
            <h3 class="card-title mb-2">
                Autonomous Insurance Claims Processing Agent
            </h3>
            <p class="text-muted">
                Upload FNOL PDF to extract fields, validate data, and route claims automatically
            </p>

            <form method="POST" enctype="multipart/form-data">
                <input type="file" name="pdf" class="form-control mb-3" required>
                <button type="submit" class="btn btn-primary px-4">
                    Analyze Claim
                </button>
            </form>
        </div>
    </div>

    {% if result %}

    <!-- Extracted Fields -->
    <div class="card mb-3">
        <div class="card-header bg-success text-white">
            Extracted Fields
        </div>
        <div class="card-body p-0">
            <ul class="list-group list-group-flush">
                {% for key, value in result["extractedFields"].items() %}
                <li class="list-group-item">
                    <strong>{{ key }}:</strong> {{ value }}
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <!-- Missing Fields -->
    <div class="card mb-3">
        <div class="card-header bg-warning">
            Missing Fields
        </div>
        <div class="card-body">
            {% if result["missingFields"] %}
                <ul class="list-group">
                    {% for field in result["missingFields"] %}
                    <li class="list-group-item">
                        {{ field }}
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-success mb-0">
                    No missing mandatory fields detected.
                </p>
            {% endif %}
        </div>
    </div>

    <!-- Routing Decision -->
    <div class="card mb-3">
        <div class="card-header bg-dark text-white">
            Routing Decision
        </div>
        <div class="card-body">
            <h5>
                Recommended Route:
                <span class="badge bg-primary">
                    {{ result["recommendedRoute"] }}
                </span>
            </h5>
            <p class="mt-2 mb-0">
                <strong>Reasoning:</strong> {{ result["reasoning"] }}
            </p>
        </div>
    </div>

    <!-- Download JSON -->
    <div class="text-center mt-4">
        <a href="/download-json" class="btn btn-outline-success">
            â¬‡ Download JSON Result
        </a>
    </div>

    {% endif %}

</div>

</body>
</html>
